{% extends 'base.html' %}

{% block title %}Student Dashboard{% endblock %}

{% block content %}
<h2>Welcome, {{ user.username }}</h2>

<p>
  <a href="{{ url_for('student_performance') }}">
    <button>ðŸ“Š View My Performance</button>
  </a>
</p>
<p>
  <a href="{{ url_for('download_student_report') }}">
    <button style="padding:8px 14px; margin-bottom:10px;">ðŸ“„ Download My Report</button>
  </a>
</p>
<h3>Available Tests</h3>
<ul style="list-style:none; padding:0;">
  {% for s in summaries %}
    <li class="test-card">
      <strong>{{ s.test.title }}</strong> â€” Possible: {{ s.possible }} â€”
      {% if s.scored is not none %}
        Scored: {{ s.scored }}
      {% else %}
        <a href="{{ url_for('take_test', test_id=s.test.id) }}">
          <button>Take</button>
        </a>
      {% endif %}
    </li>
  {% else %}
    <li>No tests assigned</li>
  {% endfor %}
</ul>

{% if avg %}
<p><strong>Average Score:</strong> {{ "%.2f"|format(avg) }}%</p>
{% endif %}
{% endblock %}
